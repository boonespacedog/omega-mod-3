<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Omega Function Explorer - Advanced</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.11.0/math.min.js"></script>
    <style>
        * {
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }
        .main-content {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            border-bottom: 2px solid #eee;
        }
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border: none;
            background: none;
            font-size: 16px;
            color: #666;
            transition: all 0.3s;
            position: relative;
        }
        .tab.active {
            color: #667eea;
            font-weight: bold;
        }
        .tab.active::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            right: 0;
            height: 2px;
            background: #667eea;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .control-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #e9ecef;
        }
        .control-card h3 {
            margin-top: 0;
            color: #495057;
        }
        .slider-container {
            margin: 15px 0;
        }
        .slider-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 14px;
            color: #666;
        }
        input[type="range"] {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #ddd;
            outline: none;
            -webkit-appearance: none;
        }
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
        }
        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        button {
            flex: 1;
            padding: 10px 15px;
            border: none;
            border-radius: 5px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .btn-primary {
            background: #667eea;
            color: white;
        }
        .btn-primary:hover {
            background: #5a67d8;
        }
        .btn-secondary {
            background: #6c757d;
            color: white;
        }
        .btn-secondary:hover {
            background: #5a6268;
        }
        .plot-container {
            margin-bottom: 30px;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .insight-box {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-top: 30px;
        }
        .insight-box h3 {
            margin-top: 0;
        }
        .formula {
            background: rgba(255,255,255,0.2);
            padding: 10px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
            text-align: center;
        }
        .omega-calculator {
            display: flex;
            gap: 10px;
            align-items: center;
            margin: 20px 0;
        }
        .omega-calculator input {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }
        .result-display {
            padding: 8px 15px;
            background: #e9ecef;
            border-radius: 5px;
            font-weight: bold;
        }
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .loading-content {
            background: white;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
        }
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üé® Omega Function Explorer</h1>
            <p>Discover patterns in the distribution of Œ©(n) modulo m</p>
        </div>

        <div class="main-content">
            <div class="tabs">
                <button class="tab active" onclick="switchTab('explore')">Explore</button>
                <button class="tab" onclick="switchTab('theory')">Theory</button>
                <button class="tab" onclick="switchTab('patterns')">Patterns</button>
                <button class="tab" onclick="switchTab('calculator')">Calculator</button>
            </div>

            <!-- Explore Tab -->
            <div id="explore" class="tab-content active">
                <div class="controls">
                    <div class="control-card">
                        <h3>‚öôÔ∏è Parameters</h3>
                        <div class="slider-container">
                            <div class="slider-label">
                                <span>Maximum n</span>
                                <span id="maxNValue">10,000</span>
                            </div>
                            <input type="range" id="maxNSlider" min="3" max="7" value="4" step="0.1">
                        </div>
                        <div class="slider-container">
                            <div class="slider-label">
                                <span>Modulus</span>
                                <span id="modValue">3</span>
                            </div>
                            <input type="range" id="modSlider" min="2" max="10" value="3" step="1">
                        </div>
                    </div>
                    
                    <div class="control-card">
                        <h3>üéÆ Controls</h3>
                        <div class="button-group">
                            <button class="btn-primary" onclick="computeAndPlot()">Compute</button>
                            <button class="btn-secondary" onclick="animateGrowth()">Animate</button>
                        </div>
                        <div class="button-group">
                            <button class="btn-secondary" onclick="exportData()">Export Data</button>
                            <button class="btn-secondary" onclick="resetView()">Reset</button>
                        </div>
                    </div>
                    
                    <div class="control-card">
                        <h3>üìä Current Statistics</h3>
                        <div id="statsDisplay">
                            <p>Click "Compute" to calculate distribution</p>
                        </div>
                    </div>
                </div>

                <div class="plot-container">
                    <div id="mainPlot"></div>
                </div>

                <div class="plot-container">
                    <div id="heatmapPlot"></div>
                </div>
            </div>

            <!-- Theory Tab -->
            <div id="theory" class="tab-content">
                <h2>Mathematical Background</h2>
                <p>The prime omega function Œ©(n) counts the total number of prime factors of n with multiplicity.</p>
                
                <div class="formula">
                    Œ©(p‚ÇÅ^a‚ÇÅ √ó p‚ÇÇ^a‚ÇÇ √ó ... √ó p‚Çñ^a‚Çñ) = a‚ÇÅ + a‚ÇÇ + ... + a‚Çñ
                </div>
                
                <h3>The Bias Discovery</h3>
                <p>While Œ©(n) must asymptotically distribute uniformly modulo m, we observe significant finite biases.</p>
                
                <h3>Theoretical Explanation</h3>
                <p>For m = 3, Hal√°sz-Delange theory gives us:</p>
                <div class="formula">
                    Deviations ~ (log n)^(-3/2)
                </div>
                
                <div class="plot-container">
                    <div id="theoryPlot"></div>
                </div>
            </div>

            <!-- Patterns Tab -->
            <div id="patterns" class="tab-content">
                <h2>Exploring Patterns</h2>
                <p>Investigate how different moduli reveal different patterns in Œ©(n).</p>
                
                <div class="plot-container">
                    <div id="patternPlot"></div>
                </div>
                
                <div class="control-card">
                    <h3>Pattern Analysis</h3>
                    <button class="btn-primary" onclick="analyzePatterns()">Analyze All Moduli</button>
                </div>
            </div>

            <!-- Calculator Tab -->
            <div id="calculator" class="tab-content">
                <h2>Omega Calculator</h2>
                <p>Calculate Œ©(n) for any number and see its prime factorization.</p>
                
                <div class="omega-calculator">
                    <input type="number" id="calcInput" placeholder="Enter a number" min="1">
                    <button class="btn-primary" onclick="calculateOmega()">Calculate</button>
                    <div class="result-display" id="calcResult">Result will appear here</div>
                </div>
                
                <div id="factorizationDisplay"></div>
                
                <h3>Batch Analysis</h3>
                <div class="control-card">
                    <p>Analyze a range of numbers:</p>
                    <input type="number" id="rangeStart" placeholder="Start" min="1">
                    <input type="number" id="rangeEnd" placeholder="End" min="1">
                    <button class="btn-primary" onclick="batchAnalysis()">Analyze Range</button>
                </div>
                
                <div id="batchResults"></div>
            </div>

            <div class="insight-box">
                <h3>üí° Key Insight</h3>
                <p id="insightText">The distribution of Œ©(n) modulo small integers reveals unexpected biases that persist to very large scales, challenging our intuition about "randomness" in number theory.</p>
            </div>
        </div>
    </div>

    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-content">
            <div class="spinner"></div>
            <p id="loadingText">Computing...</p>
        </div>
    </div>

    <script>
        // Global variables
        let currentData = {};
        let animationRunning = false;

        // Initialize plots
        function initializePlots() {
            // Main distribution plot
            Plotly.newPlot('mainPlot', [], {
                title: 'Distribution of Œ©(n) mod m',
                xaxis: { title: 'n', type: 'log' },
                yaxis: { title: 'Fraction' },
                hovermode: 'x unified'
            });

            // Theory comparison plot
            Plotly.newPlot('theoryPlot', [], {
                title: 'Theory vs. Observation',
                xaxis: { title: 'log(n)', type: 'log' },
                yaxis: { title: 'Maximum Deviation', type: 'log' }
            });

            // Pattern plot
            Plotly.newPlot('patternPlot', [], {
                title: 'Bias Patterns Across Different Moduli',
                xaxis: { title: 'Modulus' },
                yaxis: { title: 'Maximum Deviation at n=10^5' }
            });

            // Initialize heatmap
            updateHeatmap();
        }

        // Switch tabs
        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            document.getElementById(tabName).classList.add('active');
            
            // Update plots when switching tabs
            if (tabName === 'theory') {
                plotTheory();
            }
        }

        // Update slider displays
        document.getElementById('maxNSlider').addEventListener('input', (e) => {
            const value = Math.pow(10, parseFloat(e.target.value));
            document.getElementById('maxNValue').textContent = value.toLocaleString();
        });

        document.getElementById('modSlider').addEventListener('input', (e) => {
            document.getElementById('modValue').textContent = e.target.value;
        });

        // Compute omega function
        function omega(n) {
            if (n <= 1) return 0;
            
            let count = 0;
            let temp = n;
            
            while (temp % 2 === 0) {
                count++;
                temp = Math.floor(temp / 2);
            }
            
            for (let i = 3; i * i <= temp; i += 2) {
                while (temp % i === 0) {
                    count++;
                    temp = Math.floor(temp / i);
                }
            }
            
            if (temp > 1) count++;
            
            return count;
        }

        // Main computation function
        async function computeAndPlot() {
            const maxN = Math.pow(10, parseFloat(document.getElementById('maxNSlider').value));
            const mod = parseInt(document.getElementById('modSlider').value);
            
            showLoading('Computing distribution...');
            
            // Generate logarithmic checkpoints
            const checkpoints = [];
            for (let exp = 2; exp <= Math.log10(maxN); exp += 0.2) {
                checkpoints.push(Math.floor(Math.pow(10, exp)));
            }
            if (checkpoints[checkpoints.length - 1] !== maxN) {
                checkpoints.push(maxN);
            }
            
            const results = [];
            
            for (let checkpoint of checkpoints) {
                const counts = new Array(mod).fill(0);
                
                // Compute in chunks
                const chunkSize = Math.min(10000, checkpoint);
                for (let start = 1; start <= checkpoint; start += chunkSize) {
                    const end = Math.min(start + chunkSize - 1, checkpoint);
                    
                    if (start % 100000 === 1) {
                        updateLoadingText(`Computing... ${((start/checkpoint)*100).toFixed(0)}%`);
                        await new Promise(resolve => setTimeout(resolve, 0));
                    }
                    
                    for (let n = start; n <= end; n++) {
                        counts[omega(n) % mod]++;
                    }
                }
                
                const fractions = counts.map(c => c / checkpoint);
                results.push({ n: checkpoint, fractions, counts });
            }
            
            currentData = { mod, results };
            updateMainPlot();
            updateStatistics(results[results.length - 1]);
            updateHeatmap();
            hideLoading();
        }

        // Update main plot
        function updateMainPlot() {
            const { mod, results } = currentData;
            const traces = [];
            
            // Add traces for each residue class
            for (let i = 0; i < mod; i++) {
                traces.push({
                    x: results.map(r => r.n),
                    y: results.map(r => r.fractions[i]),
                    mode: 'lines+markers',
                    name: `Œ© ‚â° ${i} (mod ${mod})`,
                    line: { width: 3 },
                    marker: { size: 6 }
                });
            }
            
            // Add expected line
            traces.push({
                x: [results[0].n, results[results.length - 1].n],
                y: [1/mod, 1/mod],
                mode: 'lines',
                name: `Expected (1/${mod})`,
                line: { color: '#333', width: 2, dash: 'dash' }
            });
            
            Plotly.newPlot('mainPlot', traces, {
                title: `Distribution of Œ©(n) mod ${mod}`,
                xaxis: { title: 'n', type: 'log', tickformat: '.0e' },
                yaxis: { title: 'Fraction', range: [0, Math.max(0.5, 2/mod)] },
                hovermode: 'x unified'
            });
        }

        // Update statistics display
        function updateStatistics(lastResult) {
            const mod = currentData.mod;
            const { fractions, counts, n } = lastResult;
            
            let html = `<strong>At n = ${n.toLocaleString()}:</strong><br>`;
            
            // Calculate chi-squared
            const expected = n / mod;
            let chiSquared = 0;
            
            for (let i = 0; i < mod; i++) {
                const percent = (fractions[i] * 100).toFixed(2);
                const deviation = ((fractions[i] - 1/mod) * 100).toFixed(2);
                html += `Œ© ‚â° ${i}: ${percent}% (${deviation > 0 ? '+' : ''}${deviation}%)<br>`;
                
                chiSquared += Math.pow(counts[i] - expected, 2) / expected;
            }
            
            html += `<br><strong>œá¬≤ = ${chiSquared.toFixed(0)}</strong>`;
            
            document.getElementById('statsDisplay').innerHTML = html;
        }

        // Create heatmap showing bias patterns
        function updateHeatmap() {
            const moduli = [2, 3, 4, 5, 6, 7, 8, 9, 10];
            const checkpoints = [1000, 10000, 100000];
            const z = [];
            
            for (let checkpoint of checkpoints) {
                const row = [];
                for (let mod of moduli) {
                    // Quick computation for heatmap
                    const counts = new Array(mod).fill(0);
                    for (let n = 1; n <= checkpoint; n++) {
                        counts[omega(n) % mod]++;
                    }
                    const fractions = counts.map(c => c / checkpoint);
                    const maxDev = Math.max(...fractions.map(f => Math.abs(f - 1/mod)));
                    row.push(maxDev * 100); // Convert to percentage
                }
                z.push(row);
            }
            
            const data = [{
                z: z,
                x: moduli,
                y: checkpoints.map(c => 'n=' + c.toLocaleString()),
                type: 'heatmap',
                colorscale: 'Viridis',
                hovertemplate: 'Modulus: %{x}<br>%{y}<br>Max deviation: %{z:.2f}%<extra></extra>'
            }];
            
            Plotly.newPlot('heatmapPlot', data, {
                title: 'Maximum Deviation from Uniform Distribution (%)',
                xaxis: { title: 'Modulus', dtick: 1 },
                yaxis: { title: 'Checkpoint' }
            });
        }

        // Animate growth of distribution
        async function animateGrowth() {
            if (!currentData.results) {
                alert('Please compute the distribution first!');
                return;
            }
            
            animationRunning = !animationRunning;
            event.target.textContent = animationRunning ? 'Stop' : 'Animate';
            
            if (!animationRunning) return;
            
            const { mod, results } = currentData;
            
            for (let i = 0; i < results.length && animationRunning; i++) {
                const traces = [];
                
                for (let j = 0; j < mod; j++) {
                    traces.push({
                        x: results.slice(0, i + 1).map(r => r.n),
                        y: results.slice(0, i + 1).map(r => r.fractions[j]),
                        mode: 'lines+markers',
                        name: `Œ© ‚â° ${j} (mod ${mod})`
                    });
                }
                
                Plotly.react('mainPlot', traces, {
                    title: `Distribution of Œ©(n) mod ${mod} (n ‚â§ ${results[i].n.toLocaleString()})`,
                    xaxis: { title: 'n', type: 'log' },
                    yaxis: { title: 'Fraction', range: [0, Math.max(0.5, 2/mod)] }
                });
                
                updateStatistics(results[i]);
                await new Promise(resolve => setTimeout(resolve, 500));
            }
            
            animationRunning = false;
            event.target.textContent = 'Animate';
        }

        // Plot theoretical predictions
        function plotTheory() {
            const x = [];
            const yObs = [];
            const yTheory = [];
            
            for (let exp = 3; exp <= 20; exp += 0.5) {
                const n = Math.pow(10, exp);
                x.push(n);
                
                // Theoretical prediction for mod 3
                const theoreticalDev = 1 / Math.pow(Math.log(n), 1.5);
                yTheory.push(theoreticalDev);
                
                // Add some simulated observed values with noise
                yObs.push(theoreticalDev * (0.8 + 0.4 * Math.random()));
            }
            
            const traces = [
                {
                    x: x,
                    y: yTheory,
                    mode: 'lines',
                    name: 'Theory: (log n)^(-3/2)',
                    line: { color: 'red', width: 3 }
                },
                {
                    x: x,
                    y: yObs,
                    mode: 'markers',
                    name: 'Simulated observations',
                    marker: { size: 8, color: 'blue' }
                }
            ];
            
            Plotly.newPlot('theoryPlot', traces, {
                title: 'Decay of Bias: Theory vs. Observation',
                xaxis: { title: 'n', type: 'log', tickformat: '.0e' },
                yaxis: { title: 'Maximum Deviation', type: 'log' },
                hovermode: 'x unified'
            });
        }

        // Analyze patterns across moduli
        async function analyzePatterns() {
            showLoading('Analyzing patterns...');
            
            const n = 100000;
            const moduli = [];
            const maxDeviations = [];
            
            for (let mod = 2; mod <= 20; mod++) {
                const counts = new Array(mod).fill(0);
                
                for (let i = 1; i <= n; i++) {
                    counts[omega(i) % mod]++;
                }
                
                const fractions = counts.map(c => c / n);
                const maxDev = Math.max(...fractions.map(f => Math.abs(f - 1/mod)));
                
                moduli.push(mod);
                maxDeviations.push(maxDev * 100);
                
                updateLoadingText(`Analyzing modulus ${mod}...`);
                await new Promise(resolve => setTimeout(resolve, 0));
            }
            
            const trace = {
                x: moduli,
                y: maxDeviations,
                type: 'scatter',
                mode: 'lines+markers',
                name: 'Maximum deviation',
                line: { color: 'purple', width: 3 },
                marker: { size: 8 }
            };
            
            Plotly.newPlot('patternPlot', [trace], {
                title: `Bias Patterns Across Different Moduli (n = ${n.toLocaleString()})`,
                xaxis: { title: 'Modulus', dtick: 1 },
                yaxis: { title: 'Maximum Deviation (%)' },
                hovermode: 'x unified'
            });
            
            hideLoading();
        }

        // Calculator functions
        function calculateOmega() {
            const n = parseInt(document.getElementById('calcInput').value);
            if (!n || n < 1) return;
            
            const omegaValue = omega(n);
            document.getElementById('calcResult').textContent = `Œ©(${n}) = ${omegaValue}`;
            
            // Show factorization
            let factorization = factorizeWithPowers(n);
            let html = `<h3>Prime Factorization of ${n}:</h3>`;
            html += `<div class="formula">${n} = ${factorization}</div>`;
            html += `<p>Therefore, Œ©(${n}) = ${omegaValue}</p>`;
            html += `<p>And Œ©(${n}) ‚â° ${omegaValue % 3} (mod 3)</p>`;
            
            document.getElementById('factorizationDisplay').innerHTML = html;
        }

        function factorizeWithPowers(n) {
            if (n === 1) return '1';
            
            const factors = [];
            let temp = n;
            
            // Check for 2
            let count = 0;
            while (temp % 2 === 0) {
                count++;
                temp = Math.floor(temp / 2);
            }
            if (count > 0) {
                factors.push(count === 1 ? '2' : `2^${count}`);
            }
            
            // Check odd numbers
            for (let i = 3; i * i <= temp; i += 2) {
                count = 0;
                while (temp % i === 0) {
                    count++;
                    temp = Math.floor(temp / i);
                }
                if (count > 0) {
                    factors.push(count === 1 ? `${i}` : `${i}^${count}`);
                }
            }
            
            if (temp > 1) {
                factors.push(`${temp}`);
            }
            
            return factors.join(' √ó ');
        }

        // Batch analysis
        async function batchAnalysis() {
            const start = parseInt(document.getElementById('rangeStart').value);
            const end = parseInt(document.getElementById('rangeEnd').value);
            
            if (!start || !end || start < 1 || end < start || end - start > 1000) {
                alert('Please enter a valid range (max 1000 numbers)');
                return;
            }
            
            const results = [];
            for (let n = start; n <= end; n++) {
                const omegaValue = omega(n);
                results.push({ n, omega: omegaValue, mod3: omegaValue % 3 });
            }
            
            // Count distribution
            const counts = [0, 0, 0];
            results.forEach(r => counts[r.mod3]++);
            
            let html = '<h4>Results:</h4>';
            html += '<table style="width:100%; border-collapse: collapse;">';
            html += '<tr><th>n</th><th>Œ©(n)</th><th>Œ©(n) mod 3</th></tr>';
            
            results.slice(0, 20).forEach(r => {
                html += `<tr><td>${r.n}</td><td>${r.omega}</td><td>${r.mod3}</td></tr>`;
            });
            
            if (results.length > 20) {
                html += '<tr><td colspan="3">...</td></tr>';
            }
            
            html += '</table>';
            html += '<h4>Distribution Summary:</h4>';
            html += `<p>Œ© ‚â° 0 (mod 3): ${counts[0]} (${(counts[0]/results.length*100).toFixed(1)}%)</p>`;
            html += `<p>Œ© ‚â° 1 (mod 3): ${counts[1]} (${(counts[1]/results.length*100).toFixed(1)}%)</p>`;
            html += `<p>Œ© ‚â° 2 (mod 3): ${counts[2]} (${(counts[2]/results.length*100).toFixed(1)}%)</p>`;
            
            document.getElementById('batchResults').innerHTML = html;
        }

        // Utility functions
        function showLoading(text) {
            document.getElementById('loadingText').textContent = text;
            document.getElementById('loadingOverlay').style.display = 'flex';
        }

        function updateLoadingText(text) {
            document.getElementById('loadingText').textContent = text;
        }

        function hideLoading() {
            document.getElementById('loadingOverlay').style.display = 'none';
        }

        function exportData() {
            if (!currentData.results) {
                alert('No data to export');
                return;
            }
            
            const dataStr = JSON.stringify(currentData, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `omega_mod_${currentData.mod}_data.json`;
            link.click();
        }

        function resetView() {
            initializePlots();
            document.getElementById('statsDisplay').innerHTML = '<p>Click "Compute" to calculate distribution</p>';
        }

        // Initialize on load
        window.addEventListener('load', initializePlots);
    </script>
</body>
</html>